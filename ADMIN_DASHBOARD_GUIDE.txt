#!/usr/bin/env python
"""
Admin Dashboard Setup and Access Guide
"""

print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ADMIN DASHBOARD ACCESS GUIDE                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ADMIN DASHBOARD URL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  http://localhost:8000/api/appointments/admin/dashboard/

  âš ï¸  NOTE: You MUST be logged in to access this page!


ğŸ” LOGIN CREDENTIALS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Email:    sujanbhusal02@gmail.com
  Phone:    945689456
  Password: Hello@1234


ğŸ“‹ ADMIN DASHBOARD FEATURES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  âœ“ View all submitted appointments
  âœ“ Filter by office (Kathmandu, Pokhara, Dharan, Biratnagar, Butwal, Birgunj)
  âœ“ Filter by date range
  âœ“ View appointment details:
    - Name
    - Citizenship Number
    - Province
    - District
    - City
    - Selected Office
    - Submission Date/Time
  âœ“ View QR code for each appointment
  âœ“ Download QR code as PNG image
  âœ“ Logout


ğŸš€ STEP-BY-STEP ACCESS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. START THE SERVER (if not already running):
   
   cd backend
   python manage.py runserver

2. SUBMIT TEST APPOINTMENTS:

   Option A: Via appointment form
   - Go to: http://localhost:8000/api/appointments/form/
   - Fill in the form
   - Submit
   - QR code will display

   Option B: Via API (cURL)
   
   curl -X POST http://localhost:8000/api/appointments/ \\
     -H "Content-Type: application/json" \\
     -d '{
       "user_name": "Test User",
       "citizenship_number": "123-45-67890",
       "province": "bagmati",
       "district": "Kathmandu",
       "city": "Kathmandu",
       "office": "kathmandu"
     }'

3. LOGIN IN BROWSER:
   
   - The dashboard requires authentication
   - When you visit the admin dashboard URL, login with your credentials
   - JWT token will be stored in localStorage

4. VIEW ADMIN DASHBOARD:

   - Go to: http://localhost:8000/api/appointments/admin/dashboard/
   - You'll see a table with all appointments
   - Use filters to narrow down appointments
   - Click "View QR" to see and download QR codes


ğŸ”„ DATA FLOW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User submits form
       â†“
/api/appointments/ (POST)
       â†“
Django creates Appointment record
       â†“
QR code auto-generated with appointment data
       â†“
QR code saved to media/qr_codes/
       â†“
Response with QR URL returned to frontend
       â†“
Admin views appointments at /api/appointments/admin/dashboard/


ğŸ“± APPOINTMENT FORM PAGE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  http://localhost:8000/api/appointments/form/

  Features:
  âœ“ Simple, clean form
  âœ“ Real-time validation
  âœ“ Supported fields:
    - Full Name (min 2 chars)
    - Citizenship Number (min 5 chars)
    - Province (dropdown, 6 options)
    - District (min 2 chars)
    - City (min 2 chars)
    - Office (dropdown, 6 options)
  âœ“ Auto QR code generation
  âœ“ QR code display after submission
  âœ“ Reset button to book another


ğŸ› ï¸ API ENDPOINTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. CREATE APPOINTMENT (Public)
   POST /api/appointments/
   
   curl -X POST http://localhost:8000/api/appointments/ \\
     -H "Content-Type: application/json" \\
     -d '{...}'

2. LIST ALL APPOINTMENTS (Admin only)
   GET /api/appointments/list_all/
   
   curl -X GET http://localhost:8000/api/appointments/list_all/ \\
     -H "Authorization: Bearer YOUR_TOKEN"

3. GET QR CODE
   GET /api/appointments/<id>/get_qr_code/
   
   curl -X GET http://localhost:8000/api/appointments/1/get_qr_code/

4. FORM PAGE
   GET /api/appointments/form/

5. DASHBOARD PAGE
   GET /api/appointments/admin/dashboard/


ğŸ¯ QUICK TEST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. cd backend
2. python manage.py runserver
3. Open browser to: http://localhost:8000/api/appointments/form/
4. Fill and submit form
5. See QR code appear
6. Go to: http://localhost:8000/api/appointments/admin/dashboard/
7. Login when prompted
8. View submitted appointment


â“ TROUBLESHOOTING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Q: Dashboard login not working?
A: Check that password is properly hashed:
   python check_users.py

Q: No appointments showing?
A: 1. Verify you're logged in with admin credentials
   2. Submit test appointment first
   3. Check database: python manage.py shell

Q: QR code not displaying?
A: 1. Check media folder exists: backend/media/qr_codes/
   2. Verify qrcode package installed: pip list | grep qrcode
   3. Check server logs for errors

Q: Can't submit appointment?
A: 1. Check all fields are valid (min lengths)
   2. Citizenship number must be unique
   3. Check server is running


âœ¨ WHAT'S NOW AVAILABLE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Appointment form page - Create appointments
âœ… Admin dashboard - View all appointments
âœ… QR code generation - Auto-generated for each appointment
âœ… Filters - Filter by office and date
âœ… Download QR - Save QR codes as PNG
âœ… Frontend renamed - "Application" â†’ "Appointment"
âœ… API endpoints - Fully functional
âœ… Authentication - JWT based
âœ… Authorization - Role-based (is_office_admin)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Ready to test? Start with: python manage.py runserver
Then visit: http://localhost:8000/api/appointments/form/

""")
